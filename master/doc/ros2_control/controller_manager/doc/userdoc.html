

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Controller Manager &mdash; ROS2_Control: Rolling Dec 2024 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/reviewer_stats.css?v=068b34ac" />

  
    <link rel="shortcut icon" href="../../../../_static/favicon_ros-controls.ico"/>
    <link rel="canonical" href="https://control.ros.org/rolling//rolling/doc/ros2_control/controller_manager/doc/userdoc.html" />
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=e058219d"></script>
      <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../_static/copybutton.js?v=f281be69"></script>
      <script data-domain="control.ros.org" defer="defer" src="https://plausible.io/js/script.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Controller Chaining / Cascade Control" href="controller_chaining.html" />
    <link rel="prev" title="ros2_control" href="../../doc/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html">
            
              <img src="../../../../_static/logo_ros-controls.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../roscon2024_workshop.html">ROSCon 2024 Workshop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../doc/index.html">ros2_control</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../doc/index.html#api-documentation">API Documentation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../doc/index.html#concepts">Concepts</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Controller Manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#determinism">Determinism</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subscribers">Subscribers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#handling-multiple-controller-managers">Handling Multiple Controller Managers</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#helper-scripts">Helper scripts</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#spawner"><code class="docutils literal notranslate"><span class="pre">spawner</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#unspawner"><code class="docutils literal notranslate"><span class="pre">unspawner</span></code></a></li>
<li class="toctree-l5"><a class="reference internal" href="#hardware-spawner"><code class="docutils literal notranslate"><span class="pre">hardware_spawner</span></code></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#rqt-controller-manager">rqt_controller_manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-controller-manager-in-a-process">Using the Controller Manager in a Process</a></li>
<li class="toctree-l4"><a class="reference internal" href="#launching-controller-manager-with-ros2-control-node">Launching controller_manager with ros2_control_node</a></li>
<li class="toctree-l4"><a class="reference internal" href="#concepts">Concepts</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#restarting-all-controllers">Restarting all controllers</a></li>
<li class="toctree-l5"><a class="reference internal" href="#restarting-hardware">Restarting hardware</a></li>
<li class="toctree-l5"><a class="reference internal" href="#hardware-and-controller-errors">Hardware and Controller Errors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="controller_chaining.html">Controller Chaining / Cascade Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hardware_interface/doc/joints_userdoc.html">Joint Kinematics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hardware_interface/doc/hardware_components_userdoc.html">Hardware Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hardware_interface/doc/mock_components_userdoc.html">Mock Components</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/index.html#guidelines-and-best-practices">Guidelines and Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ros2_controllers/doc/controllers_index.html">ros2_controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ros2_control_demos/doc/index.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ros2controlcli/doc/userdoc.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../simulators/simulators.html">Simulator Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes/release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../migration/migration.html">Migration Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_list/api_list.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../supported_robots/supported_robots.html">Supported Robots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../project_ideas.html">Project Ideas for GSoC 2024</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../acknowledgements/acknowledgements.html">Acknowledgements</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">ROS2_Control: Rolling</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../doc/index.html">ros2_control</a></li>
      <li class="breadcrumb-item active">Controller Manager</li>
      <li class="wy-breadcrumbs-aside">
              <!-- User defined GitHub URL -->
              <a href="https://github.com/ros-controls/ros2_control/blob/master/controller_manager/doc/userdoc.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             

<p>
  <strong>
    
    You're reading the documentation for a development version.
    For the latest released version, please have a look at <a href="../../../../../jazzy/doc/ros2_control/controller_manager/doc/userdoc.html">Jazzy</a>.
    
  </strong>
</p>


  <section id="controller-manager">
<span id="controller-manager-userdoc"></span><h1>Controller Manager<a class="headerlink" href="#controller-manager" title="Link to this heading"></a></h1>
<p>Controller Manager is the main component in the ros2_control framework.
It manages lifecycle of controllers, access to the hardware interfaces and offers services to the ROS-world.</p>
<section id="determinism">
<h2>Determinism<a class="headerlink" href="#determinism" title="Link to this heading"></a></h2>
<p>For best performance when controlling hardware you want the controller manager to have as little jitter as possible in the main control loop.</p>
<p>Independent of the kernel installed, the main thread of Controller Manager attempts to
configure <code class="docutils literal notranslate"><span class="pre">SCHED_FIFO</span></code> with a priority of <code class="docutils literal notranslate"><span class="pre">50</span></code>.
By default, the user does not have permission to set such a high priority.
To give the user such permissions, add a group named realtime and add the user controlling your robot to this group:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>addgroup<span class="w"> </span>realtime
<span class="gp">$ </span>sudo<span class="w"> </span>usermod<span class="w"> </span>-a<span class="w"> </span>-G<span class="w"> </span>realtime<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>
</pre></div>
</div>
<p>Afterwards, add the following limits to the realtime group in <code class="docutils literal notranslate"><span class="pre">/etc/security/limits.conf</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">@realtime soft rtprio 99</span>
<span class="go">@realtime soft priority 99</span>
<span class="go">@realtime soft memlock 102400</span>
<span class="go">@realtime hard rtprio 99</span>
<span class="go">@realtime hard priority 99</span>
<span class="go">@realtime hard memlock 102400</span>
</pre></div>
</div>
<p>The limits will be applied after you log out and in again.</p>
<p>The normal linux kernel is optimized for computational throughput and therefore is not well suited for hardware control.
Alternatives to the standard kernel include</p>
<ul class="simple">
<li><p><a class="reference external" href="https://ubuntu.com/blog/real-time-ubuntu-released">Real-time Ubuntu 22.04 LTS Beta</a> on Ubuntu 22.04</p></li>
<li><p><a class="reference external" href="https://packages.debian.org/bullseye/linux-image-rt-amd64">linux-image-rt-amd64</a> on Debian Bullseye</p></li>
<li><p>lowlatency kernel (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">linux-lowlatency</span></code>) on any ubuntu</p></li>
</ul>
<p>Though installing a realtime-kernel will definitely get the best results when it comes to low
jitter, using a lowlatency kernel can improve things a lot with being really easy to install.</p>
</section>
<section id="subscribers">
<h2>Subscribers<a class="headerlink" href="#subscribers" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>robot_description [std_msgs::msg::String]</dt><dd><p>String with the URDF xml, e.g., from <code class="docutils literal notranslate"><span class="pre">robot_state_publisher</span></code>.
Reloading of the URDF is not supported yet.
All joints defined in the <code class="docutils literal notranslate"><span class="pre">&lt;ros2_control&gt;</span></code>-tag have to be present in the URDF.</p>
</dd>
</dl>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading"></a></h2>
<dl class="simple">
<dt>&lt;controller_name&gt;.type</dt><dd><p>Name of a plugin exported using <code class="docutils literal notranslate"><span class="pre">pluginlib</span></code> for a controller.
This is a class from which controller’s instance with name “<code class="docutils literal notranslate"><span class="pre">controller_name</span></code>” is created.</p>
</dd>
<dt>&lt;controller_name&gt;.params_file</dt><dd><p>The absolute path to the YAML file with parameters for the controller.
The file should contain the parameters for the controller in the standard ROS 2 YAML format.</p>
</dd>
<dt>&lt;controller_name&gt;.fallback_controllers</dt><dd><p>List of controllers that are activated as a fallback strategy, when the spawned controllers fail by returning <code class="docutils literal notranslate"><span class="pre">return_type::ERROR</span></code> during the <code class="docutils literal notranslate"><span class="pre">update</span></code> cycle.
It is recommended to add all the controllers needed for the fallback strategy to the list, including the chainable controllers whose interfaces are used by the main fallback controllers.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The fallback controllers activation is subject to the availability of the state and command interfaces at the time of activation.
It is recommended to test the fallback strategy in simulation before deploying it on the real robot.</p>
</div>
<dl>
<dt>update_rate (int)</dt><dd><p>The frequency of controller manager’s real-time update loop. This loop reads states from hardware, updates controllers and writes commands to hardware.</p>
<p>Read only: True</p>
<p>Default:  100</p>
</dd>
<dt>hardware_components_initial_state</dt><dd><p>Map of parameters for controlled lifecycle management of hardware components.
The names of the components are defined as attribute of <code class="docutils literal notranslate"><span class="pre">&lt;ros2_control&gt;</span></code>-tag in <code class="docutils literal notranslate"><span class="pre">robot_description</span></code>.
Hardware components found in <code class="docutils literal notranslate"><span class="pre">robot_description</span></code>, but without explicit state definition will be immediately activated.
Detailed explanation of each parameter is given below.
The full structure of the map is given in the following example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">hardware_components_initial_state</span><span class="p">:</span>
<span class="w">  </span><span class="nt">unconfigured</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;arm1&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;arm2&quot;</span>
<span class="w">  </span><span class="nt">inactive</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;base3&quot;</span>
</pre></div>
</div>
</dd>
<dt>hardware_components_initial_state.unconfigured (string_array)</dt><dd><p>Defines which hardware components will be only loaded when controller manager is started. These hardware components will need to be configured and activated manually or via a hardware spawner.</p>
<p>Default:  {}</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>contains no duplicates</p></li>
</ul>
</div></blockquote>
</dd>
<dt>hardware_components_initial_state.inactive (string_array)</dt><dd><p>Defines which hardware components will be configured when controller manager is started. These hardware components will need to be activated manually or via a hardware spawner.</p>
<p>Default:  {}</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>contains no duplicates</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controllers.execution_time</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">execution_time</span></code> diagnostics will be published for all controllers. The <code class="docutils literal notranslate"><span class="pre">mean_error</span></code> for a synchronous controller will be computed against zero, as it should be as low as possible. However, the <code class="docutils literal notranslate"><span class="pre">mean_error</span></code> for an asynchronous controller will be computed against the controller’s desired update period, as the controller can take a maximum of the desired period cycle to execute it’s update cycle.</p>
</dd>
<dt>diagnostics.threshold.controllers.periodicity</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">periodicity</span></code> diagnostics will be published only for the asynchronous controllers, because any affect to the synchronous controllers will be reflected directly in the controller manager’s periodicity.</p>
</dd>
<dt>diagnostics.threshold.controller_manager.periodicity.mean_error.warn (double)</dt><dd><p>The warning threshold for the mean error of the controller manager’s periodicity. If the mean error exceeds this threshold, a warning diagnostic will be published.</p>
<p>Default:  5.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controller_manager.periodicity.mean_error.error (double)</dt><dd><p>The error threshold for the mean error of the controller manager’s periodicity. If the mean error exceeds this threshold, an error diagnostic will be published.</p>
<p>Default:  10.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controller_manager.periodicity.standard_deviation.warn (double)</dt><dd><p>The warning threshold for the standard deviation of the controller manager’s periodicity. If the standard deviation exceeds this threshold, a warning diagnostic will be published.</p>
<p>Default:  5.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controller_manager.periodicity.standard_deviation.error (double)</dt><dd><p>The error threshold for the standard deviation of the controller manager’s periodicity. If the standard deviation exceeds this threshold, an error diagnostic will be published.</p>
<p>Default:  10.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controllers.periodicity.mean_error.warn (double)</dt><dd><p>The warning threshold for the mean error of the controller update loop. If the mean error exceeds this threshold, a warning diagnostic will be published. This diagnostics will be published only for the asynchronous controllers, because any affect to the synchronous controllers will be reflected directly in the controller manager’s periodicity.</p>
<p>Default:  5.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controllers.periodicity.mean_error.error (double)</dt><dd><p>The error threshold for the mean error of the controller update loop. If the mean error exceeds this threshold, an error diagnostic will be published. This diagnostics will be published only for the asynchronous controllers, because any affect to the synchronous controllers will be reflected directly in the controller manager’s periodicity.</p>
<p>Default:  10.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controllers.periodicity.standard_deviation.warn (double)</dt><dd><p>The warning threshold for the standard deviation of the controller update loop. If the standard deviation exceeds this threshold, a warning diagnostic will be published. This diagnostics will be published only for the asynchronous controllers, because any affect to the synchronous controllers will be reflected directly in the controller manager’s periodicity.</p>
<p>Default:  5.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controllers.periodicity.standard_deviation.error (double)</dt><dd><p>The error threshold for the standard deviation of the controller update loop. If the standard deviation exceeds this threshold, an error diagnostic will be published. This diagnostics will be published only for the asynchronous controllers, because any affect to the synchronous controllers will be reflected directly in the controller manager’s periodicity.</p>
<p>Default:  10.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controllers.execution_time.mean_error.warn (double)</dt><dd><p>The warning threshold for the mean error of the controller’s update cycle execution time in microseconds. If the mean error exceeds this threshold, a warning diagnostic will be published. The <code class="docutils literal notranslate"><span class="pre">mean_error</span></code> for a synchronous controller will be computed against zero, as it should be as low as possible. However, the <code class="docutils literal notranslate"><span class="pre">mean_error</span></code> for an asynchronous controller will be computed against the controller’s desired update period, as the controller can take a maximum of the desired period cycle to execute it’s update cycle</p>
<p>Default:  1000.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controllers.execution_time.mean_error.error (double)</dt><dd><p>The error threshold for the mean error of the controller’s update cycle execution time in microseconds. If the mean error exceeds this threshold, an error diagnostic will be published. The <code class="docutils literal notranslate"><span class="pre">mean_error</span></code> for a synchronous controller will be computed against zero, as it should be as low as possible. However, the <code class="docutils literal notranslate"><span class="pre">mean_error</span></code> for an asynchronous controller will be computed against the controller’s desired update period, as the controller can take a maximum of the desired period cycle to execute it’s update cycle</p>
<p>Default:  2000.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controllers.execution_time.standard_deviation.warn (double)</dt><dd><p>The warning threshold for the standard deviation of the controller’s update cycle execution time. If the standard deviation exceeds this threshold, a warning diagnostic will be published.</p>
<p>Default:  100.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
<dt>diagnostics.threshold.controllers.execution_time.standard_deviation.error (double)</dt><dd><p>The error threshold for the standard deviation of the controller’s update cycle execution time. If the standard deviation exceeds this threshold, an error diagnostic will be published.</p>
<p>Default:  200.0</p>
<p>Constraints:</p>
<blockquote>
<div><ul class="simple">
<li><p>greater than 0.0</p></li>
</ul>
</div></blockquote>
</dd>
</dl>
<p><strong>An example parameter file:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">controller_manager</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">diagnostics</span><span class="p">:</span>
<span class="w">      </span><span class="nt">threshold</span><span class="p">:</span>
<span class="w">        </span><span class="nt">controller_manager</span><span class="p">:</span>
<span class="w">          </span><span class="nt">periodicity</span><span class="p">:</span>
<span class="w">            </span><span class="nt">mean_error</span><span class="p">:</span>
<span class="w">              </span><span class="nt">error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="w">              </span><span class="nt">warn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="w">            </span><span class="nt">standard_deviation</span><span class="p">:</span>
<span class="w">              </span><span class="nt">error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="w">              </span><span class="nt">warn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="w">        </span><span class="nt">controllers</span><span class="p">:</span>
<span class="w">          </span><span class="nt">execution_time</span><span class="p">:</span>
<span class="w">            </span><span class="nt">mean_error</span><span class="p">:</span>
<span class="w">              </span><span class="nt">error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2000.0</span>
<span class="w">              </span><span class="nt">warn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000.0</span>
<span class="w">            </span><span class="nt">standard_deviation</span><span class="p">:</span>
<span class="w">              </span><span class="nt">error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200.0</span>
<span class="w">              </span><span class="nt">warn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100.0</span>
<span class="w">          </span><span class="nt">periodicity</span><span class="p">:</span>
<span class="w">            </span><span class="nt">mean_error</span><span class="p">:</span>
<span class="w">              </span><span class="nt">error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="w">              </span><span class="nt">warn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="w">            </span><span class="nt">standard_deviation</span><span class="p">:</span>
<span class="w">              </span><span class="nt">error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="w">              </span><span class="nt">warn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="w">    </span><span class="nt">hardware_components_initial_state</span><span class="p">:</span>
<span class="w">      </span><span class="nt">inactive</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{}&#39;</span>
<span class="w">      </span><span class="nt">unconfigured</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;{}&#39;</span>
<span class="w">    </span><span class="nt">update_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100.0</span>
</pre></div>
</div>
<section id="handling-multiple-controller-managers">
<h3>Handling Multiple Controller Managers<a class="headerlink" href="#handling-multiple-controller-managers" title="Link to this heading"></a></h3>
<p>When dealing with multiple controller managers, you have two options for managing different robot descriptions:</p>
<ol class="arabic simple">
<li><p><strong>Using Namespaces:</strong> You can place both the <code class="docutils literal notranslate"><span class="pre">robot_state_publisher</span></code> and the <code class="docutils literal notranslate"><span class="pre">controller_manager</span></code> nodes into the same namespace.</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">control_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s2">&quot;controller_manager&quot;</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s2">&quot;ros2_control_node&quot;</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">robot_controllers</span><span class="p">],</span>
    <span class="n">output</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
    <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;rrbot&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">robot_state_pub_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s2">&quot;robot_state_publisher&quot;</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s2">&quot;robot_state_publisher&quot;</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">robot_description</span><span class="p">],</span>
    <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;rrbot&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Using Remappings:</strong> You can use remappings to handle different robot descriptions. This involves relaying topics using the <code class="docutils literal notranslate"><span class="pre">remappings</span></code> tag, allowing you to specify custom topics for each controller manager.</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">control_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s2">&quot;controller_manager&quot;</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s2">&quot;ros2_control_node&quot;</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">robot_controllers</span><span class="p">],</span>
    <span class="n">output</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
    <span class="n">remappings</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;robot_description&#39;</span><span class="p">,</span> <span class="s1">&#39;/rrbot/robot_description&#39;</span><span class="p">)]</span>
<span class="p">)</span>
<span class="n">robot_state_pub_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s2">&quot;robot_state_publisher&quot;</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s2">&quot;robot_state_publisher&quot;</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">robot_description</span><span class="p">],</span>
    <span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;rrbot&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="helper-scripts">
<h2>Helper scripts<a class="headerlink" href="#helper-scripts" title="Link to this heading"></a></h2>
<p>There are two scripts to interact with controller manager from launch files:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">spawner</span></code> - loads, configures and start a controller on startup.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unspawner</span></code> - stops and unloads a controller.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hardware_spawner</span></code> - activates and configures a hardware component.</p></li>
</ol>
</div></blockquote>
<section id="spawner">
<h3><code class="docutils literal notranslate"><span class="pre">spawner</span></code><a class="headerlink" href="#spawner" title="Link to this heading"></a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ros2<span class="w"> </span>run<span class="w"> </span>controller_manager<span class="w"> </span>spawner<span class="w"> </span>-h
<span class="go">usage: spawner [-h] [-c CONTROLLER_MANAGER] [-p PARAM_FILE] [-n NAMESPACE] [--load-only] [--inactive] [-u] [--controller-manager-timeout CONTROLLER_MANAGER_TIMEOUT]</span>
<span class="go">              [--switch-timeout SWITCH_TIMEOUT] [--activate-as-group] [--service-call-timeout SERVICE_CALL_TIMEOUT]</span>
<span class="go">              controller_names [controller_names ...]</span>

<span class="go">positional arguments:</span>
<span class="go">  controller_names      List of controllers</span>

<span class="go">options:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  -c CONTROLLER_MANAGER, --controller-manager CONTROLLER_MANAGER</span>
<span class="go">                        Name of the controller manager ROS node</span>
<span class="go">  -p PARAM_FILE, --param-file PARAM_FILE</span>
<span class="go">                        Controller param file to be loaded into controller node before configure. Pass multiple times to load different files for different controllers or to override the parameters of the same controller.</span>
<span class="go">  -n NAMESPACE, --namespace NAMESPACE</span>
<span class="go">                        DEPRECATED Namespace for the controller_manager and the controller(s)</span>
<span class="go">  --load-only           Only load the controller and leave unconfigured.</span>
<span class="go">  --inactive            Load and configure the controller, however do not activate them</span>
<span class="go">  -u, --unload-on-kill  Wait until this application is interrupted and unload controller</span>
<span class="go">  --controller-manager-timeout CONTROLLER_MANAGER_TIMEOUT</span>
<span class="go">                        Time to wait for the controller manager service to be available</span>
<span class="go">  --service-call-timeout SERVICE_CALL_TIMEOUT</span>
<span class="go">                        Time to wait for the service response from the controller manager</span>
<span class="go">  --switch-timeout SWITCH_TIMEOUT</span>
<span class="go">                        Time to wait for a successful state switch of controllers. Useful if controllers cannot be switched immediately, e.g., paused</span>
<span class="go">                        simulations at startup</span>
<span class="go">  --activate-as-group   Activates all the parsed controllers list together instead of one by one. Useful for activating all chainable controllers altogether</span>
</pre></div>
</div>
<p>The parsed controller config file can follow the same conventions as the typical ROS 2 parameter file format. Now, the spawner can handle config files with wildcard entries and also the controller name in the absolute namespace. See the following examples on the config files:</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">/**/position_trajectory_controller</span><span class="p">:</span>
<span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint_trajectory_controller/JointTrajectoryController</span>
<span class="w">  </span><span class="nt">joints</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint1</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint2</span>

<span class="w">  </span><span class="nt">command_interfaces</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">position</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">.....</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">/position_trajectory_controller</span><span class="p">:</span>
<span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint_trajectory_controller/JointTrajectoryController</span>
<span class="w">  </span><span class="nt">joints</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint1</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint2</span>

<span class="w">  </span><span class="nt">command_interfaces</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">position</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">.....</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">position_trajectory_controller</span><span class="p">:</span>
<span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint_trajectory_controller/JointTrajectoryController</span>
<span class="w">  </span><span class="nt">joints</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint1</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint2</span>

<span class="w">  </span><span class="nt">command_interfaces</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">position</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">.....</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">/rrbot_1/position_trajectory_controller</span><span class="p">:</span>
<span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint_trajectory_controller/JointTrajectoryController</span>
<span class="w">  </span><span class="nt">joints</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint1</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joint2</span>

<span class="w">  </span><span class="nt">command_interfaces</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">position</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">.....</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="unspawner">
<h3><code class="docutils literal notranslate"><span class="pre">unspawner</span></code><a class="headerlink" href="#unspawner" title="Link to this heading"></a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ros2<span class="w"> </span>run<span class="w"> </span>controller_manager<span class="w"> </span>unspawner<span class="w"> </span>-h
<span class="go">usage: unspawner [-h] [-c CONTROLLER_MANAGER] [--switch-timeout SWITCH_TIMEOUT] controller_names [controller_names ...]</span>

<span class="go">positional arguments:</span>
<span class="go">  controller_names      Name of the controller</span>

<span class="go">options:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  -c CONTROLLER_MANAGER, --controller-manager CONTROLLER_MANAGER</span>
<span class="go">                        Name of the controller manager ROS node</span>
<span class="go">  --switch-timeout SWITCH_TIMEOUT</span>
<span class="go">                        Time to wait for a successful state switch of controllers. Useful if controllers cannot be switched immediately, e.g., paused</span>
<span class="go">                        simulations at startup</span>
</pre></div>
</div>
</section>
<section id="hardware-spawner">
<h3><code class="docutils literal notranslate"><span class="pre">hardware_spawner</span></code><a class="headerlink" href="#hardware-spawner" title="Link to this heading"></a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ros2<span class="w"> </span>run<span class="w"> </span>controller_manager<span class="w"> </span>hardware_spawner<span class="w"> </span>-h
<span class="go">usage: hardware_spawner [-h] [-c CONTROLLER_MANAGER] [--controller-manager-timeout CONTROLLER_MANAGER_TIMEOUT]</span>
<span class="go">                        (--activate | --configure)</span>
<span class="go">                        hardware_component_names [hardware_component_names ...]</span>

<span class="go">positional arguments:</span>
<span class="go">  hardware_component_names</span>
<span class="go">                        The name of the hardware components which should be activated.</span>

<span class="go">options:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  -c CONTROLLER_MANAGER, --controller-manager CONTROLLER_MANAGER</span>
<span class="go">                        Name of the controller manager ROS node</span>
<span class="go">  --controller-manager-timeout CONTROLLER_MANAGER_TIMEOUT</span>
<span class="go">                        Time to wait for the controller manager</span>
<span class="go">  --activate            Activates the given components. Note: Components are by default configured before activated.</span>
<span class="go">  --configure           Configures the given components.</span>
</pre></div>
</div>
</section>
</section>
<section id="rqt-controller-manager">
<h2>rqt_controller_manager<a class="headerlink" href="#rqt-controller-manager" title="Link to this heading"></a></h2>
<p>A GUI tool to interact with the controller manager services to be able to switch the lifecycle states of the controllers as well as the hardware components.</p>
<img alt="../../../../_images/rqt_controller_manager.png" src="../../../../_images/rqt_controller_manager.png" />
<p>It can be launched independently using the following command or as rqt plugin:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 run rqt_controller_manager rqt_controller_manager</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Double-click on a controller or hardware component to show the additional info.</p></li>
<li><p>Right-click on a controller or hardware component to show a context menu with options for lifecycle management.</p></li>
</ul>
</section>
<section id="using-the-controller-manager-in-a-process">
<h2>Using the Controller Manager in a Process<a class="headerlink" href="#using-the-controller-manager-in-a-process" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ControllerManager</span></code> may also be instantiated in a process as a class, but proper care must be taken when doing so.
The reason for this is because the <code class="docutils literal notranslate"><span class="pre">ControllerManager</span></code> class inherits from <code class="docutils literal notranslate"><span class="pre">rclcpp::Node</span></code>.</p>
<p>If there is more than one Node in the process, global node name remap rules can forcibly change the <code class="docutils literal notranslate"><span class="pre">ControllerManager's</span></code> node name as well, leading to duplicate node names.
This occurs whether the Nodes are siblings or exist in a hierarchy.</p>
<img alt="../../../../_images/global_general_remap.png" src="../../../../_images/global_general_remap.png" />
<p>The workaround for this is to specify another node name remap rule in the <code class="docutils literal notranslate"><span class="pre">NodeOptions</span></code> passed to the <code class="docutils literal notranslate"><span class="pre">ControllerManager</span></code> node (causing it to ignore the global rule), or ensure that any remap rules are targeted to specific nodes.</p>
<img alt="../../../../_images/global_specific_remap.png" src="../../../../_images/global_specific_remap.png" />
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">controller_manager</span><span class="o">::</span><span class="n">get_cm_node_options</span><span class="p">();</span>
<span class="w">  </span><span class="n">options</span><span class="p">.</span><span class="n">arguments</span><span class="p">({</span>
<span class="w">    </span><span class="s">&quot;--ros-args&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;--remap&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;_target_node_name:__node:=dst_node_name&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;--log-level&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;info&quot;</span><span class="p">});</span>

<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">cm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">controller_manager</span><span class="o">::</span><span class="n">ControllerManager</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="n">executor</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;_target_node_name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;some_optional_namespace&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="launching-controller-manager-with-ros2-control-node">
<h2>Launching controller_manager with ros2_control_node<a class="headerlink" href="#launching-controller-manager-with-ros2-control-node" title="Link to this heading"></a></h2>
<p>The controller_manager can be launched with the ros2_control_node executable. The following example shows how to launch the controller_manager with the ros2_control_node executable:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">control_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s2">&quot;controller_manager&quot;</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s2">&quot;ros2_control_node&quot;</span><span class="p">,</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="n">robot_controllers</span><span class="p">],</span>
    <span class="n">output</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The ros2_control_node executable uses the following parameters from the <code class="docutils literal notranslate"><span class="pre">controller_manager</span></code> node:</p>
<dl class="simple">
<dt>lock_memory (optional; bool; default: false for a non-realtime kernel, true for a realtime kernel)</dt><dd><p>Locks the memory of the <code class="docutils literal notranslate"><span class="pre">controller_manager</span></code> node at startup to physical RAM in order to avoid page faults
and to prevent the node from being swapped out to disk.
Find more information about the setup for memory locking in the following link : <a class="reference external" href="https://access.redhat.com/solutions/61334">How to set ulimit values</a>
The following command can be used to set the memory locking limit temporarily : <code class="docutils literal notranslate"><span class="pre">ulimit</span> <span class="pre">-l</span> <span class="pre">unlimited</span></code>.</p>
</dd>
<dt>cpu_affinity (optional; int (or) int_array;)</dt><dd><p>Sets the CPU affinity of the <code class="docutils literal notranslate"><span class="pre">controller_manager</span></code> node to the specified CPU core.
If it is an integer, the node’s affinity will be set to the specified CPU core.
If it is an array of integers, the node’s affinity will be set to the specified set of CPU cores.</p>
</dd>
<dt>thread_priority (optional; int; default: 50)</dt><dd><p>Sets the thread priority of the <code class="docutils literal notranslate"><span class="pre">controller_manager</span></code> node to the specified value. The value must be between 0 and 99.</p>
</dd>
<dt>use_sim_time (optional; bool; default: false)</dt><dd><p>Enables the use of simulation time in the <code class="docutils literal notranslate"><span class="pre">controller_manager</span></code> node.</p>
</dd>
</dl>
</section>
<section id="concepts">
<h2>Concepts<a class="headerlink" href="#concepts" title="Link to this heading"></a></h2>
<section id="restarting-all-controllers">
<h3>Restarting all controllers<a class="headerlink" href="#restarting-all-controllers" title="Link to this heading"></a></h3>
<p>The simplest way to restart all controllers is by using <code class="docutils literal notranslate"><span class="pre">switch_controllers</span></code> services or CLI and adding all controllers to <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code> lists.
Note that not all controllers have to be restarted, e.g., broadcasters.</p>
</section>
<section id="restarting-hardware">
<h3>Restarting hardware<a class="headerlink" href="#restarting-hardware" title="Link to this heading"></a></h3>
<p>If hardware gets restarted then you should go through its lifecycle again in order to reconfigure and export the interfaces</p>
</section>
<section id="hardware-and-controller-errors">
<h3>Hardware and Controller Errors<a class="headerlink" href="#hardware-and-controller-errors" title="Link to this heading"></a></h3>
<p>If the hardware during it’s <code class="docutils literal notranslate"><span class="pre">read</span></code> or <code class="docutils literal notranslate"><span class="pre">write</span></code> method returns <code class="docutils literal notranslate"><span class="pre">return_type::ERROR</span></code>, the controller manager will stop all controllers that are using the hardware’s command and state interfaces.
Likewise, if a controller returns <code class="docutils literal notranslate"><span class="pre">return_type::ERROR</span></code> from its <code class="docutils literal notranslate"><span class="pre">update</span></code> method, the controller manager will deactivate the respective controller. In future, the controller manager will try to start any fallback controllers if available.</p>
</section>
</section>
</section>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../doc/index.html" class="btn btn-neutral float-left" title="ros2_control" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="controller_chaining.html" class="btn btn-neutral float-right" title="Controller Chaining / Cascade Control" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, ros2_control Development Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: rolling
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Releases</dt>
        <dd><a href="../../../../../jazzy/doc/ros2_control/controller_manager/doc/userdoc.html">Jazzy (latest)</a></dd><br>
        <dd><a href="../../../../../iron/doc/ros2_control/controller_manager/doc/userdoc.html">Iron (EOL)</a></dd><br>
        
        <dd><a href="../../../../../humble/doc/ros2_control/controller_manager/doc/userdoc.html">Humble</a></dd><br>
        <dd><a href="../../../../../galactic/doc/ros2_control/controller_manager/doc/userdoc.html">Galactic (EOL)</a></dd><br>
        
        <dd><a href="../../../../../foxy/doc/ros2_control/controller_manager/doc/userdoc.html">Foxy (EOL)</a></dd><br>
        
    </dl>
    <dl>
      <dt>In Development</dt>
      <dd><a href="userdoc.html">Rolling</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>