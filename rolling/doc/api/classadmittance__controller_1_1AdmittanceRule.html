<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ros2_control - rolling: admittance_controller::AdmittanceRule Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_ros-controls_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ros2_control - rolling
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceadmittance__controller.html">admittance_controller</a></li><li class="navelem"><a class="el" href="classadmittance__controller_1_1AdmittanceRule.html">AdmittanceRule</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classadmittance__controller_1_1AdmittanceRule-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">admittance_controller::AdmittanceRule Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for admittance_controller::AdmittanceRule:</div>
<div class="dyncontent">
<div class="center"><img src="classadmittance__controller_1_1AdmittanceRule__coll__graph.png" border="0" usemap="#aadmittance__controller_1_1AdmittanceRule_coll__map" alt="Collaboration graph"/></div>
<map name="aadmittance__controller_1_1AdmittanceRule_coll__map" id="aadmittance__controller_1_1AdmittanceRule_coll__map">
<area shape="rect" title=" " alt="" coords="395,39,560,80"/>
<area shape="rect" href="structadmittance__controller_1_1AdmittanceTransforms.html" title=" " alt="" coords="5,5,183,47"/>
<area shape="rect" href="structadmittance__controller_1_1AdmittanceState.html" title=" " alt="" coords="11,71,177,112"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a76f02022f87053198e7da04b2745128b"><td class="memItemLeft" align="right" valign="top"><a id="a76f02022f87053198e7da04b2745128b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AdmittanceRule</b> (const std::shared_ptr&lt; admittance_controller::ParamListener &gt; &amp;parameter_handler)</td></tr>
<tr class="separator:a76f02022f87053198e7da04b2745128b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab83ece6952d13f63dc31a71c9cce0485"><td class="memItemLeft" align="right" valign="top">controller_interface::return_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadmittance__controller_1_1AdmittanceRule.html#ab83ece6952d13f63dc31a71c9cce0485">configure</a> (const std::shared_ptr&lt; rclcpp_lifecycle::LifecycleNode &gt; &amp;node, const size_t num_joint)</td></tr>
<tr class="memdesc:ab83ece6952d13f63dc31a71c9cce0485"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure admittance rule memory using number of joints.  <a href="classadmittance__controller_1_1AdmittanceRule.html#ab83ece6952d13f63dc31a71c9cce0485">More...</a><br /></td></tr>
<tr class="separator:ab83ece6952d13f63dc31a71c9cce0485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e928ad0f827696c4f71ee6ec9078725"><td class="memItemLeft" align="right" valign="top"><a id="a6e928ad0f827696c4f71ee6ec9078725"></a>
controller_interface::return_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadmittance__controller_1_1AdmittanceRule.html#a6e928ad0f827696c4f71ee6ec9078725">reset</a> (const size_t num_joints)</td></tr>
<tr class="memdesc:a6e928ad0f827696c4f71ee6ec9078725"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset all values back to default. <br /></td></tr>
<tr class="separator:a6e928ad0f827696c4f71ee6ec9078725"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34a0c422f832bb2fe87fdd3d09150f8b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadmittance__controller_1_1AdmittanceRule.html#a34a0c422f832bb2fe87fdd3d09150f8b">get_all_transforms</a> (const trajectory_msgs::msg::JointTrajectoryPoint &amp;current_joint_state, const trajectory_msgs::msg::JointTrajectoryPoint &amp;reference_joint_state)</td></tr>
<tr class="separator:a34a0c422f832bb2fe87fdd3d09150f8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e4c8ca39e9a302f0e5c7a925668cd50"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadmittance__controller_1_1AdmittanceRule.html#a8e4c8ca39e9a302f0e5c7a925668cd50">apply_parameters_update</a> ()</td></tr>
<tr class="separator:a8e4c8ca39e9a302f0e5c7a925668cd50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba5690896489acac09b6bdcb85a981eb"><td class="memItemLeft" align="right" valign="top">controller_interface::return_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadmittance__controller_1_1AdmittanceRule.html#aba5690896489acac09b6bdcb85a981eb">update</a> (const trajectory_msgs::msg::JointTrajectoryPoint &amp;current_joint_state, const geometry_msgs::msg::Wrench &amp;measured_wrench, const trajectory_msgs::msg::JointTrajectoryPoint &amp;reference_joint_state, const rclcpp::Duration &amp;period, trajectory_msgs::msg::JointTrajectoryPoint &amp;desired_joint_states)</td></tr>
<tr class="separator:aba5690896489acac09b6bdcb85a981eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5119625ad28f6314ddf968628002913"><td class="memItemLeft" align="right" valign="top">const control_msgs::msg::AdmittanceControllerState &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadmittance__controller_1_1AdmittanceRule.html#ab5119625ad28f6314ddf968628002913">get_controller_state</a> ()</td></tr>
<tr class="separator:ab5119625ad28f6314ddf968628002913"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:afed8853b76bed70616e57e05cc5e8af6"><td class="memItemLeft" align="right" valign="top"><a id="afed8853b76bed70616e57e05cc5e8af6"></a>
std::shared_ptr&lt; admittance_controller::ParamListener &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>parameter_handler_</b></td></tr>
<tr class="separator:afed8853b76bed70616e57e05cc5e8af6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a857c7849205f03d0856aff89240e93d7"><td class="memItemLeft" align="right" valign="top"><a id="a857c7849205f03d0856aff89240e93d7"></a>
admittance_controller::Params&#160;</td><td class="memItemRight" valign="bottom"><b>parameters_</b></td></tr>
<tr class="separator:a857c7849205f03d0856aff89240e93d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a266d37746bbeb75c8864524993f05cae"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadmittance__controller_1_1AdmittanceRule.html#a266d37746bbeb75c8864524993f05cae">calculate_admittance_rule</a> (<a class="el" href="structadmittance__controller_1_1AdmittanceState.html">AdmittanceState</a> &amp;admittance_state, double dt)</td></tr>
<tr class="separator:a266d37746bbeb75c8864524993f05cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca1d0adc1b75e8157ae5188bb351544b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classadmittance__controller_1_1AdmittanceRule.html#aca1d0adc1b75e8157ae5188bb351544b">process_wrench_measurements</a> (const geometry_msgs::msg::Wrench &amp;measured_wrench, const Eigen::Matrix&lt; double, 3, 3 &gt; &amp;sensor_world_rot, const Eigen::Matrix&lt; double, 3, 3 &gt; &amp;cog_world_rot)</td></tr>
<tr class="separator:aca1d0adc1b75e8157ae5188bb351544b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff2f30f15e3e74472345cce3c8b3c456"><td class="memTemplParams" colspan="2"><a id="aff2f30f15e3e74472345cce3c8b3c456"></a>
template&lt;typename T1 , typename T2 &gt; </td></tr>
<tr class="memitem:aff2f30f15e3e74472345cce3c8b3c456"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>vec_to_eigen</b> (const std::vector&lt; T1 &gt; &amp;data, T2 &amp;matrix)</td></tr>
<tr class="separator:aff2f30f15e3e74472345cce3c8b3c456"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a99665bf6a78b521d368034377c90a06c"><td class="memItemLeft" align="right" valign="top"><a id="a99665bf6a78b521d368034377c90a06c"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>num_joints_</b></td></tr>
<tr class="separator:a99665bf6a78b521d368034377c90a06c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab667a24c3e837e3896403032df843ebc"><td class="memItemLeft" align="right" valign="top"><a id="ab667a24c3e837e3896403032df843ebc"></a>
std::shared_ptr&lt; pluginlib::ClassLoader&lt; <a class="el" href="classkinematics__interface_1_1KinematicsInterface.html">kinematics_interface::KinematicsInterface</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>kinematics_loader_</b></td></tr>
<tr class="separator:ab667a24c3e837e3896403032df843ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db454c10fbbba073a67a95f2d1f5d31"><td class="memItemLeft" align="right" valign="top"><a id="a3db454c10fbbba073a67a95f2d1f5d31"></a>
std::unique_ptr&lt; <a class="el" href="classkinematics__interface_1_1KinematicsInterface.html">kinematics_interface::KinematicsInterface</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>kinematics_</b></td></tr>
<tr class="separator:a3db454c10fbbba073a67a95f2d1f5d31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca25ce54a6f09c3f65cf6e2f1bc77fa0"><td class="memItemLeft" align="right" valign="top"><a id="aca25ce54a6f09c3f65cf6e2f1bc77fa0"></a>
Eigen::Matrix&lt; double, 6, 1 &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>wrench_world_</b></td></tr>
<tr class="separator:aca25ce54a6f09c3f65cf6e2f1bc77fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb425f95852f525ec7285769ea0cf0e4"><td class="memItemLeft" align="right" valign="top"><a id="abb425f95852f525ec7285769ea0cf0e4"></a>
<a class="el" href="structadmittance__controller_1_1AdmittanceState.html">AdmittanceState</a>&#160;</td><td class="memItemRight" valign="bottom"><b>admittance_state_</b> {0}</td></tr>
<tr class="separator:abb425f95852f525ec7285769ea0cf0e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa98385b7e7ebfba99461cfb64c478edb"><td class="memItemLeft" align="right" valign="top"><a id="aa98385b7e7ebfba99461cfb64c478edb"></a>
<a class="el" href="structadmittance__controller_1_1AdmittanceTransforms.html">AdmittanceTransforms</a>&#160;</td><td class="memItemRight" valign="bottom"><b>admittance_transforms_</b></td></tr>
<tr class="separator:aa98385b7e7ebfba99461cfb64c478edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a1114c1cb2a002f156424bd633e94a3"><td class="memItemLeft" align="right" valign="top"><a id="a2a1114c1cb2a002f156424bd633e94a3"></a>
Eigen::Vector3d&#160;</td><td class="memItemRight" valign="bottom"><b>cog_pos_</b></td></tr>
<tr class="separator:a2a1114c1cb2a002f156424bd633e94a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad96fff5fad35ae40fe15c94cb5b88b6c"><td class="memItemLeft" align="right" valign="top"><a id="ad96fff5fad35ae40fe15c94cb5b88b6c"></a>
Eigen::Vector3d&#160;</td><td class="memItemRight" valign="bottom"><b>end_effector_weight_</b></td></tr>
<tr class="separator:ad96fff5fad35ae40fe15c94cb5b88b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5eadfb0defa3c0d75152c955c1c34227"><td class="memItemLeft" align="right" valign="top"><a id="a5eadfb0defa3c0d75152c955c1c34227"></a>
control_msgs::msg::AdmittanceControllerState&#160;</td><td class="memItemRight" valign="bottom"><b>state_message_</b></td></tr>
<tr class="separator:a5eadfb0defa3c0d75152c955c1c34227"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8e4c8ca39e9a302f0e5c7a925668cd50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e4c8ca39e9a302f0e5c7a925668cd50">&#9670;&nbsp;</a></span>apply_parameters_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void admittance_controller::AdmittanceRule::apply_parameters_update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates parameter_ struct if any parameters have changed since last update. Parameter dependent Eigen field members (end_effector_weight_, cog_pos_, mass_, mass_inv_ stiffness, selected_axes, damping_) are also updated </p>

</div>
</div>
<a id="a266d37746bbeb75c8864524993f05cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a266d37746bbeb75c8864524993f05cae">&#9670;&nbsp;</a></span>calculate_admittance_rule()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool admittance_controller::AdmittanceRule::calculate_admittance_rule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structadmittance__controller_1_1AdmittanceState.html">AdmittanceState</a> &amp;&#160;</td>
          <td class="paramname"><em>admittance_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Calculates the admittance rule from given the robot's current joint angles. The admittance controller state input is updated with the new calculated values. A boolean value is returned indicating if any of the kinematics plugin calls failed.</p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">admittance_state</td><td>contains all the information needed to calculate the admittance offset</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dt</td><td>controller period </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">success</td><td>true if no calls to the kinematics interface fail </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab83ece6952d13f63dc31a71c9cce0485"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab83ece6952d13f63dc31a71c9cce0485">&#9670;&nbsp;</a></span>configure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">controller_interface::return_type admittance_controller::AdmittanceRule::configure </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; rclcpp_lifecycle::LifecycleNode &gt; &amp;&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>num_joint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure admittance rule memory using number of joints. </p>
<p>Configure admittance rule memory for num joints and load kinematics interface. </p>

</div>
</div>
<a id="a34a0c422f832bb2fe87fdd3d09150f8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34a0c422f832bb2fe87fdd3d09150f8b">&#9670;&nbsp;</a></span>get_all_transforms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool admittance_controller::AdmittanceRule::get_all_transforms </td>
          <td>(</td>
          <td class="paramtype">const trajectory_msgs::msg::JointTrajectoryPoint &amp;&#160;</td>
          <td class="paramname"><em>current_joint_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const trajectory_msgs::msg::JointTrajectoryPoint &amp;&#160;</td>
          <td class="paramname"><em>reference_joint_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate all transforms needed for admittance control using the loader kinematics plugin. If the transform does not exist in the kinematics model, then TF will be used for lookup. The return value is true if all transformation are calculated without an error</p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">current_joint_state</td><td>current joint state of the robot</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reference_joint_state</td><td>input joint state reference</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">success</td><td>true if no calls to the kinematics interface fail </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab5119625ad28f6314ddf968628002913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5119625ad28f6314ddf968628002913">&#9670;&nbsp;</a></span>get_controller_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const control_msgs::msg::AdmittanceControllerState &amp; admittance_controller::AdmittanceRule::get_controller_state </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set fields of <code>state_message</code> from current admittance controller state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">state_message</td><td>message containing target position/vel/accel, wrench, and actual robot state, among other things </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aca1d0adc1b75e8157ae5188bb351544b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca1d0adc1b75e8157ae5188bb351544b">&#9670;&nbsp;</a></span>process_wrench_measurements()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void admittance_controller::AdmittanceRule::process_wrench_measurements </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::msg::Wrench &amp;&#160;</td>
          <td class="paramname"><em>measured_wrench</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Matrix&lt; double, 3, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>sensor_world_rot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Matrix&lt; double, 3, 3 &gt; &amp;&#160;</td>
          <td class="paramname"><em>cog_world_rot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Updates internal estimate of wrench in world frame <code>wrench_world_</code> given the new measurement <code>measured_wrench</code>, the sensor to base frame rotation <code>sensor_world_rot</code>, and the center of gravity frame to base frame rotation <code>cog_world_rot</code>. The <code>wrench_world_</code> estimate includes gravity compensation</p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">measured_wrench</td><td>most recent measured wrench from force torque sensor</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sensor_world_rot</td><td>rotation matrix from world frame to sensor frame</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cog_world_rot</td><td>rotation matrix from world frame to center of gravity frame </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aba5690896489acac09b6bdcb85a981eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba5690896489acac09b6bdcb85a981eb">&#9670;&nbsp;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">controller_interface::return_type admittance_controller::AdmittanceRule::update </td>
          <td>(</td>
          <td class="paramtype">const trajectory_msgs::msg::JointTrajectoryPoint &amp;&#160;</td>
          <td class="paramname"><em>current_joint_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const geometry_msgs::msg::Wrench &amp;&#160;</td>
          <td class="paramname"><em>measured_wrench</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const trajectory_msgs::msg::JointTrajectoryPoint &amp;&#160;</td>
          <td class="paramname"><em>reference_joint_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const rclcpp::Duration &amp;&#160;</td>
          <td class="paramname"><em>period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">trajectory_msgs::msg::JointTrajectoryPoint &amp;&#160;</td>
          <td class="paramname"><em>desired_joint_states</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate 'desired joint states' based on the 'measured force', 'reference joint state', and 'current_joint_state'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">current_joint_state</td><td>current joint state of the robot </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">measured_wrench</td><td>most recent measured wrench from force torque sensor </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reference_joint_state</td><td>input joint state reference </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">period</td><td>time in seconds since last controller update </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">desired_joint_state</td><td>joint state reference after the admittance offset is applied to the input reference </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ros2_controllers/admittance_controller/include/admittance_controller/<a class="el" href="admittance__rule_8hpp_source.html">admittance_rule.hpp</a></li>
<li>ros2_controllers/admittance_controller/include/admittance_controller/<a class="el" href="admittance__rule__impl_8hpp_source.html">admittance_rule_impl.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
